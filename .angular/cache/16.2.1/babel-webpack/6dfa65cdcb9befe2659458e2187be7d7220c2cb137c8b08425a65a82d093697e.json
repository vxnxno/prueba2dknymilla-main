{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/milla/Documents/GitHub/prueba2dknymilla-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { Camera, CameraResultType, CameraSource } from '@capacitor/camera';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/usuarios.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/platform-browser\";\nimport * as i5 from \"@angular/common\";\nfunction ClaseRegistradaPage_li_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Nombre Profesor: \", ctx_r0.splitResultado()[\"Nombre Profesor\"], \"\");\n  }\n}\nfunction ClaseRegistradaPage_li_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Hora: \", ctx_r1.splitResultado()[\"Hora\"], \"\");\n  }\n}\nfunction ClaseRegistradaPage_li_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Sala: \", ctx_r2.splitResultado()[\"sala\"], \"\");\n  }\n}\nfunction ClaseRegistradaPage_li_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"D\\u00EDa: \", ctx_r3.splitResultado()[\"Dia\"], \"\");\n  }\n}\nclass ClaseRegistradaPage {\n  getPhoto() {\n    return this.imageSource;\n  }\n  constructor(usuariosService, route, alertController, router, domSanitizer) {\n    var _this = this;\n    this.usuariosService = usuariosService;\n    this.route = route;\n    this.alertController = alertController;\n    this.router = router;\n    this.domSanitizer = domSanitizer;\n    this.usuario = '';\n    this.nombre = '';\n    this.apellido = '';\n    this.rut = '';\n    this.region = '';\n    this.comuna = '';\n    this.escuela = '';\n    this.carrera = '';\n    this.contrasenia = '';\n    this.latitude = 0;\n    this.longitude = 0;\n    this.takePicture = /*#__PURE__*/_asyncToGenerator(function* () {\n      const image = yield Camera.getPhoto({\n        quality: 90,\n        allowEditing: false,\n        resultType: CameraResultType.Uri,\n        source: CameraSource.Camera\n      });\n      _this.imageSource = _this.domSanitizer.bypassSecurityTrustUrl(image.webPath ? image.webPath : \"\");\n    });\n    this.route.queryParams.subscribe(params => {\n      this.resultado = params['resultado'];\n    });\n  }\n  ngOnInit() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.usuarioActual = yield _this2.usuariosService.getUsuarioActual();\n      if (_this2.usuarioActual && _this2.resultado) {\n        // Divide el resultado del escaneo y obtiene los datos\n        const resultadoDividido = _this2.splitResultado();\n        // Verifica si las propiedades necesarias existen en resultadoDividido\n        if (resultadoDividido['Nombre Profesor'] && resultadoDividido['Hora'] && resultadoDividido['sala'] && resultadoDividido['Dia']) {\n          // Actualiza el atributo clase del usuario actual\n          _this2.usuarioActual.clase = {\n            profesor: resultadoDividido['Nombre Profesor'],\n            hora: resultadoDividido['Hora'],\n            sala: resultadoDividido['sala'],\n            dia: resultadoDividido['Dia']\n          };\n          // Llama al servicio para actualizar el usuario actual\n          yield _this2.usuariosService.setUsuarioActual(_this2.usuarioActual);\n          // Asegúrate de que se actualice el usuario en el almacenamiento\n          yield _this2.usuariosService.actualizarUsuarioRegistrado(_this2.usuarioActual);\n        } else {\n          console.error('No se encontraron todos los datos necesarios en el resultado del escaneo.');\n        }\n      }\n    })();\n  }\n  splitResultado() {\n    const partes = this.resultado.split(',');\n    const resultadoDividido = {};\n    partes.forEach(parte => {\n      const [nombre, valor] = parte.split(': ');\n      if (nombre && valor) {\n        resultadoDividido[nombre.trim()] = valor.trim();\n      }\n    });\n    return resultadoDividido;\n  }\n  getCurrentLocation() {\n    var _this3 = this;\n    if ('geolocation' in navigator) {\n      navigator.geolocation.getCurrentPosition( /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator(function* (position) {\n          _this3.latitude = position.coords.latitude;\n          _this3.longitude = position.coords.longitude;\n          const usuarioActual = yield _this3.usuariosService.getUsuarioActual();\n          if (usuarioActual) {\n            // Actualiza la latitud y longitud del usuario actual\n            usuarioActual.latitude = _this3.latitude;\n            usuarioActual.longitude = _this3.longitude;\n            // Llama al servicio para actualizar el usuario actual\n            yield _this3.usuariosService.setUsuarioActual(usuarioActual);\n            yield _this3.usuariosService.actualizarUsuarioRegistrado(usuarioActual);\n          } else {\n            console.error('Usuario actual no encontrado');\n          }\n        });\n        return function (_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }(), error => {\n        console.error('Error obteniendo la ubicación', error);\n      });\n    } else {\n      console.error('Geolocalización no es compatible en este dispositivo');\n    }\n  }\n  cerrarSesion() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      // Llama al método de servicio para cerrar la sesión\n      yield _this4.usuariosService.cerrarUsuarioActual();\n      _this4.router.navigate(['/home']);\n    })();\n  }\n}\n_class = ClaseRegistradaPage;\n_class.ɵfac = function ClaseRegistradaPage_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.UsuariosService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.AlertController), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i4.DomSanitizer));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-clase-registrada\"]],\n  decls: 49,\n  vars: 15,\n  consts: [[\"slot\", \"end\", \"routerLink\", \"/home\"], [3, \"click\"], [3, \"fullscreen\"], [1, \"mostrar\"], [4, \"ngIf\"], [1, \"fondito\"], [\"slot\", \"end\"], [\"expand\", \"block\", \"size\", \"small\", 1, \"botoncito\", 3, \"click\"], [1, \"image-container\"], [2, \"width\", \"250px\", 3, \"src\"], [\"expand\", \"block\", \"size\", \"small\", 3, \"click\"]],\n  template: function ClaseRegistradaPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-toolbar\")(1, \"ion-buttons\", 0)(2, \"ion-button\", 1);\n      i0.ɵɵlistener(\"click\", function ClaseRegistradaPage_Template_ion_button_click_2_listener() {\n        return ctx.cerrarSesion();\n      });\n      i0.ɵɵtext(3, \" Cerrar sesion \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(4, \"ion-content\", 2);\n      i0.ɵɵelement(5, \"br\");\n      i0.ɵɵelementStart(6, \"ion-title\");\n      i0.ɵɵtext(7, \"Clase Registrada\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"ion-card\")(9, \"ion-card-header\")(10, \"ion-card-title\");\n      i0.ɵɵtext(11, \"Clase\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"ion-card-content\")(13, \"ul\", 3);\n      i0.ɵɵtemplate(14, ClaseRegistradaPage_li_14_Template, 2, 1, \"li\", 4);\n      i0.ɵɵtemplate(15, ClaseRegistradaPage_li_15_Template, 2, 1, \"li\", 4);\n      i0.ɵɵtemplate(16, ClaseRegistradaPage_li_16_Template, 2, 1, \"li\", 4);\n      i0.ɵɵtemplate(17, ClaseRegistradaPage_li_17_Template, 2, 1, \"li\", 4);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(18, \"ion-card\")(19, \"ion-card-header\")(20, \"ion-card-title\");\n      i0.ɵɵtext(21, \"Informaci\\u00F3n del Usuario\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(22, \"ul\", 3)(23, \"li\");\n      i0.ɵɵtext(24);\n      i0.ɵɵpipe(25, \"titlecase\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"li\");\n      i0.ɵɵtext(27);\n      i0.ɵɵpipe(28, \"titlecase\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"li\");\n      i0.ɵɵtext(30);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(31, \"br\")(32, \"br\");\n      i0.ɵɵelementStart(33, \"ion-list\", 5)(34, \"ion-label\");\n      i0.ɵɵtext(35, \"Latitud:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"ion-note\", 6);\n      i0.ɵɵtext(37);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(38, \"br\");\n      i0.ɵɵelementStart(39, \"ion-label\");\n      i0.ɵɵtext(40, \"Longitud:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"ion-note\", 6);\n      i0.ɵɵtext(42);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(43, \"ion-button\", 7);\n      i0.ɵɵlistener(\"click\", function ClaseRegistradaPage_Template_ion_button_click_43_listener() {\n        return ctx.getCurrentLocation();\n      });\n      i0.ɵɵtext(44, \"Obtener ubicaci\\u00F3n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(45, \"div\", 8);\n      i0.ɵɵelement(46, \"img\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"ion-button\", 10);\n      i0.ɵɵlistener(\"click\", function ClaseRegistradaPage_Template_ion_button_click_47_listener() {\n        return ctx.takePicture();\n      });\n      i0.ɵɵtext(48, \"Abrir c\\u00E1mara\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"fullscreen\", true);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngIf\", ctx.splitResultado()[\"Nombre Profesor\"]);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.splitResultado()[\"Hora\"]);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.splitResultado()[\"sala\"]);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.splitResultado()[\"Dia\"]);\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate1(\" Nombre: \", i0.ɵɵpipeBind1(25, 11, ctx.usuarioActual == null ? null : ctx.usuarioActual.nombre), \"\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" Apellido: \", i0.ɵɵpipeBind1(28, 13, ctx.usuarioActual == null ? null : ctx.usuarioActual.apellido), \"\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" RUT: \", ctx.usuarioActual == null ? null : ctx.usuarioActual.rut, \"\");\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate(ctx.latitude);\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(ctx.longitude);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"src\", ctx.getPhoto(), i0.ɵɵsanitizeUrl);\n    }\n  },\n  dependencies: [i5.NgIf, i3.IonButton, i3.IonButtons, i3.IonCard, i3.IonCardContent, i3.IonCardHeader, i3.IonCardTitle, i3.IonContent, i3.IonLabel, i3.IonList, i3.IonNote, i3.IonTitle, i3.IonToolbar, i3.RouterLinkDelegate, i2.RouterLink, i5.TitleCasePipe],\n  styles: [\"ion-content[_ngcontent-%COMP%] {\\n  --background: #240127;\\n}\\nion-content[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%] {\\n  color: white;\\n  transform: translateY(20%);\\n  background-color: #770081;\\n}\\nion-content[_ngcontent-%COMP%]   .fondito[_ngcontent-%COMP%] {\\n  --color: white;\\n  --background-color: #770081 ;\\n}\\nion-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%] {\\n  color: white;\\n  background-color: #770081;\\n}\\nion-content[_ngcontent-%COMP%]   .ion-card-content[_ngcontent-%COMP%] {\\n  background-color: #240127;\\n  color: white;\\n}\\nion-content[_ngcontent-%COMP%]   .ul[_ngcontent-%COMP%] {\\n  color: white;\\n}\\nion-content[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%] {\\n  font-family: Arial, Helvetica, sans-serif;\\n  font-size: 28px;\\n  text-align: center;\\n  color: white;\\n}\\nion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%] {\\n  --background: #770081;\\n  --color: white;\\n}\\n\\nion-toolbar[_ngcontent-%COMP%] {\\n  --background: #240127;\\n}\\n\\nion-title[_ngcontent-%COMP%] {\\n  transform: translateY(-40%);\\n  font-size: 26px;\\n  font-family: Arial, Helvetica, sans-serif;\\n  color: white;\\n}\\n\\n.mostrar[_ngcontent-%COMP%] {\\n  font-size: 18px;\\n  font-family: Arial, Helvetica, sans-serif;\\n  color: white;\\n  font-weight: bold;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2xhc2UtcmVnaXN0cmFkYS9jbGFzZS1yZWdpc3RyYWRhLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHFCQUFBO0FBQ0Y7QUFDRTtFQUNFLFlBQUE7RUFDQSwwQkFBQTtFQUNBLHlCQUFBO0FBQ0o7QUFFRTtFQUNFLGNBQUE7RUFDQSw0QkFBQTtBQUFKO0FBR0U7RUFDRSxZQUFBO0VBQ0EseUJBQUE7QUFESjtBQUlFO0VBQ0UseUJBQUE7RUFDQSxZQUFBO0FBRko7QUFLRTtFQUNFLFlBQUE7QUFISjtBQU1FO0VBQ0UseUNBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0FBSko7QUFRRTtFQUNFLHFCQUFBO0VBQ0EsY0FBQTtBQU5KOztBQVdBO0VBQ0UscUJBQUE7QUFSRjs7QUFXQTtFQUNFLDJCQUFBO0VBQ0EsZUFBQTtFQUNBLHlDQUFBO0VBQ0EsWUFBQTtBQVJGOztBQVdBO0VBQ0UsZUFBQTtFQUNBLHlDQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0FBUkYiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tY29udGVudCB7XHJcbiAgLS1iYWNrZ3JvdW5kOiAjMjQwMTI3O1xyXG5cclxuICBpb24tY2FyZCB7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMjAlKTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM3NzAwODE7XHJcbiAgfVxyXG5cclxuICAuZm9uZGl0byB7XHJcbiAgICAtLWNvbG9yOiB3aGl0ZTtcclxuICAgIC0tYmFja2dyb3VuZC1jb2xvcjogIzc3MDA4MVxyXG4gIH1cclxuXHJcbiAgaW9uLWl0ZW0ge1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzc3MDA4MTtcclxuICB9XHJcblxyXG4gIC5pb24tY2FyZC1jb250ZW50IHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMyNDAxMjc7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgfVxyXG5cclxuICAudWwge1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gIH1cclxuXHJcbiAgaW9uLWNhcmQtdGl0bGUge1xyXG4gICAgZm9udC1mYW1pbHk6IEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7XHJcbiAgICBmb250LXNpemU6IDI4cHg7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcblxyXG4gIH1cclxuXHJcbiAgaW9uLWJ1dHRvbiB7XHJcbiAgICAtLWJhY2tncm91bmQ6ICM3NzAwODE7XHJcbiAgICAtLWNvbG9yOiB3aGl0ZTtcclxuICB9XHJcblxyXG59XHJcblxyXG5pb24tdG9vbGJhciB7XHJcbiAgLS1iYWNrZ3JvdW5kOiAjMjQwMTI3O1xyXG59XHJcblxyXG5pb24tdGl0bGUge1xyXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNDAlKTtcclxuICBmb250LXNpemU6IDI2cHg7XHJcbiAgZm9udC1mYW1pbHk6IEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG59XHJcblxyXG4ubW9zdHJhciB7XHJcbiAgZm9udC1zaXplOiAxOHB4O1xyXG4gIGZvbnQtZmFtaWx5OiBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});\nexport { ClaseRegistradaPage };","map":{"version":3,"names":["Camera","CameraResultType","CameraSource","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","splitResultado","ctx_r1","ctx_r2","ctx_r3","ClaseRegistradaPage","getPhoto","imageSource","constructor","usuariosService","route","alertController","router","domSanitizer","_this","usuario","nombre","apellido","rut","region","comuna","escuela","carrera","contrasenia","latitude","longitude","takePicture","_asyncToGenerator","image","quality","allowEditing","resultType","Uri","source","bypassSecurityTrustUrl","webPath","queryParams","subscribe","params","resultado","ngOnInit","_this2","usuarioActual","getUsuarioActual","resultadoDividido","clase","profesor","hora","sala","dia","setUsuarioActual","actualizarUsuarioRegistrado","console","error","partes","split","forEach","parte","valor","trim","getCurrentLocation","_this3","navigator","geolocation","getCurrentPosition","_ref2","position","coords","_x","apply","arguments","cerrarSesion","_this4","cerrarUsuarioActual","navigate","ɵɵdirectiveInject","i1","UsuariosService","i2","ActivatedRoute","i3","AlertController","Router","i4","DomSanitizer","selectors","decls","vars","consts","template","ClaseRegistradaPage_Template","rf","ctx","ɵɵlistener","ClaseRegistradaPage_Template_ion_button_click_2_listener","ɵɵelement","ɵɵtemplate","ClaseRegistradaPage_li_14_Template","ClaseRegistradaPage_li_15_Template","ClaseRegistradaPage_li_16_Template","ClaseRegistradaPage_li_17_Template","ClaseRegistradaPage_Template_ion_button_click_43_listener","ClaseRegistradaPage_Template_ion_button_click_47_listener","ɵɵproperty","ɵɵpipeBind1","ɵɵtextInterpolate","ɵɵsanitizeUrl"],"sources":["C:\\Users\\milla\\Documents\\GitHub\\prueba2dknymilla-main\\src\\app\\clase-registrada\\clase-registrada.page.ts","C:\\Users\\milla\\Documents\\GitHub\\prueba2dknymilla-main\\src\\app\\clase-registrada\\clase-registrada.page.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { UsuariosService } from '../services/usuarios.service';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { Usuario, Clase } from '../models/usuario';\r\nimport { Camera, CameraResultType, CameraSource } from '@capacitor/camera';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n@Component({\r\n  selector: 'app-clase-registrada',\r\n  templateUrl: './clase-registrada.page.html',\r\n  styleUrls: ['./clase-registrada.page.scss'],\r\n})\r\nexport class ClaseRegistradaPage implements OnInit {\r\n  resultado!: string;\r\n  usuarioActual: any;\r\n    usuario = '';\r\n    nombre = '';\r\n    apellido = '';\r\n    rut = '';\r\n    region = '';\r\n    comuna = '';\r\n    escuela = '';\r\n    carrera = '';\r\n    contrasenia = '';\r\n\r\n    latitude: number = 0;\r\n    longitude: number = 0;\r\n\r\n    imageSource:any;\r\n    takePicture = async () => {\r\n    const image = await Camera.getPhoto({\r\n      quality: 90,\r\n      allowEditing: false,\r\n      resultType: CameraResultType.Uri,\r\n      source:CameraSource.Camera\r\n    });\r\n\r\n    this.imageSource= this.domSanitizer.bypassSecurityTrustUrl(image.webPath ? image.webPath : \"\")\r\n  };\r\n  getPhoto(){\r\n    return this.imageSource\r\n  }\r\n\r\n\r\n  constructor(\r\n    private usuariosService: UsuariosService,\r\n    private route: ActivatedRoute,\r\n    private alertController: AlertController,\r\n    private router: Router,\r\n    private domSanitizer:DomSanitizer) {\r\n    this.route.queryParams.subscribe(params => {\r\n      this.resultado = params['resultado'];\r\n    });\r\n\r\n  }\r\n\r\n  async ngOnInit() {\r\n    this.usuarioActual = await this.usuariosService.getUsuarioActual();\r\n    if (this.usuarioActual && this.resultado) {\r\n      // Divide el resultado del escaneo y obtiene los datos\r\n      const resultadoDividido = this.splitResultado();\r\n\r\n      // Verifica si las propiedades necesarias existen en resultadoDividido\r\n      if (\r\n        resultadoDividido['Nombre Profesor'] &&\r\n        resultadoDividido['Hora'] &&\r\n        resultadoDividido['sala'] &&\r\n        resultadoDividido['Dia']\r\n      ) {\r\n        // Actualiza el atributo clase del usuario actual\r\n        this.usuarioActual.clase = {\r\n          profesor: resultadoDividido['Nombre Profesor'],\r\n          hora: resultadoDividido['Hora'],\r\n          sala: resultadoDividido['sala'],\r\n          dia: resultadoDividido['Dia']\r\n        };\r\n\r\n        // Llama al servicio para actualizar el usuario actual\r\n        await this.usuariosService.setUsuarioActual(this.usuarioActual);\r\n\r\n        // Asegúrate de que se actualice el usuario en el almacenamiento\r\n        await this.usuariosService.actualizarUsuarioRegistrado(this.usuarioActual);\r\n      } else {\r\n        console.error('No se encontraron todos los datos necesarios en el resultado del escaneo.');\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  splitResultado() {\r\n    const partes = this.resultado.split(',');\r\n\r\n    const resultadoDividido: { [key: string]: string } = {};\r\n\r\n    partes.forEach(parte => {\r\n      const [nombre, valor] = parte.split(': ');\r\n      if (nombre && valor) {\r\n        resultadoDividido[nombre.trim()] = valor.trim();\r\n      }\r\n    });\r\n    return resultadoDividido;\r\n  }\r\n\r\n  getCurrentLocation() {\r\n    if ('geolocation' in navigator) {\r\n      navigator.geolocation.getCurrentPosition(async (position) => {\r\n        this.latitude = position.coords.latitude;\r\n        this.longitude = position.coords.longitude;\r\n\r\n        const usuarioActual = await this.usuariosService.getUsuarioActual();\r\n        if (usuarioActual) {\r\n          // Actualiza la latitud y longitud del usuario actual\r\n          usuarioActual.latitude = this.latitude;\r\n          usuarioActual.longitude = this.longitude;\r\n\r\n          // Llama al servicio para actualizar el usuario actual\r\n          await this.usuariosService.setUsuarioActual(usuarioActual);\r\n\r\n          await this.usuariosService.actualizarUsuarioRegistrado(usuarioActual);\r\n        } else {\r\n          console.error('Usuario actual no encontrado');\r\n        }\r\n      }, (error) => {\r\n        console.error('Error obteniendo la ubicación', error);\r\n      });\r\n    } else {\r\n      console.error('Geolocalización no es compatible en este dispositivo');\r\n    }\r\n  }\r\n\r\n\r\n  async cerrarSesion() {\r\n    // Llama al método de servicio para cerrar la sesión\r\n    await this.usuariosService.cerrarUsuarioActual();\r\n    this.router.navigate(['/home']);\r\n  }\r\n\r\n}\r\n","<ion-toolbar>\r\n  <ion-buttons slot=\"end\" routerLink=\"/home\">\r\n    <ion-button (click)=\"cerrarSesion()\"> Cerrar sesion </ion-button>\r\n  </ion-buttons>\r\n</ion-toolbar>\r\n\r\n\r\n\r\n<ion-content [fullscreen]=\"true\">\r\n  <br>\r\n  <ion-title>Clase Registrada</ion-title>\r\n  <ion-card>\r\n    <ion-card-header>\r\n      <ion-card-title>Clase</ion-card-title>\r\n    </ion-card-header>\r\n    <ion-card-content>\r\n      <ul class=\"mostrar\">\r\n        <li *ngIf=\"splitResultado()['Nombre Profesor']\">Nombre Profesor: {{ splitResultado()['Nombre Profesor'] }}</li>\r\n        <li *ngIf=\"splitResultado()['Hora']\">Hora: {{ splitResultado()['Hora'] }}</li>\r\n        <li *ngIf=\"splitResultado()['sala']\">Sala: {{ splitResultado()['sala'] }}</li>\r\n        <li *ngIf=\"splitResultado()['Dia']\">Día: {{ splitResultado()['Dia'] }}</li>\r\n      </ul>\r\n    </ion-card-content>\r\n  </ion-card>\r\n  <ion-card>\r\n    <ion-card-header>\r\n      <ion-card-title>Información del Usuario</ion-card-title>\r\n    </ion-card-header>\r\n\r\n    <ul class=\"mostrar\">\r\n      <li> Nombre: {{ usuarioActual?.nombre | titlecase }}</li>\r\n      <li> Apellido: {{ usuarioActual?.apellido | titlecase }}</li>\r\n      <li> RUT: {{ usuarioActual?.rut }}</li>\r\n      <!-- ... otros campos del usuario ... -->\r\n    </ul>\r\n  </ion-card>\r\n  <br>\r\n  <br>\r\n  <ion-list class=\"fondito\">\r\n    <ion-label>Latitud:</ion-label>\r\n    <ion-note slot=\"end\">{{ latitude }}</ion-note>\r\n    <br>\r\n    <ion-label>Longitud:</ion-label>\r\n    <ion-note slot=\"end\">{{ longitude }}</ion-note>\r\n  </ion-list>\r\n\r\n  <ion-button class=\"botoncito\" expand=\"block\" size=\"small\" (click)=\"getCurrentLocation()\">Obtener\r\n    ubicación</ion-button>\r\n  <div class=\"image-container\">\r\n    <img [src]=\"getPhoto()\" style=\"width: 250px;\">\r\n  </div>\r\n  <ion-button expand=\"block\" size=\"small\" (click)=\"takePicture()\">Abrir cámara</ion-button>\r\n\r\n</ion-content>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}